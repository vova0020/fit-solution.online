# FIT-MES Микро-CMS

Система управления контентом для сайта FIT-MES, позволяющая редактировать новости и партнеров через удобную админ-панель.

## Возможности

- ✅ Управление новостями (добавление, редактирование, удаление)
- ✅ Управление партнерами (добавление, редактирование, удаление)
- ✅ **НОВОЕ:** Сортировка новостей и партнеров по порядку отображения
- ✅ Безопасная авторизация с хэшированием паролей
- ✅ Динамическая загрузка контента на сайте
- ✅ Автоматическое создание модальных окон
- ✅ Адаптивный дизайн админ-панели
- ✅ **НОВОЕ:** Улучшенная совместимость с браузерами и мобильными устройствами
- ✅ **НОВОЕ:** Поддержка accessibility и touch-интерфейсов
- ✅ Хранение данных в JSON файле (без БД)

## Установка и запуск

### 1. Установка зависимостей
```bash
npm install
```

### 2. Настройка пароля администратора
Отредактируйте файл `config.json` и замените хэш пароля:

```javascript
// Для генерации нового хэша пароля используйте:
const bcrypt = require('bcrypt');
const hash = bcrypt.hashSync('ваш_новый_пароль', 10);
console.log(hash);
```

### 3. Запуск сервера
```bash
npm start
```

Сервер запустится на порту 3000 (или указанном в переменной PORT).

## Использование

### Доступ к админ-панели
- URL: `http://localhost:3000/admin.html`
- Логин: `admin`
- Пароль: `admin123` (по умолчанию)

### Публичный сайт
- URL: `http://localhost:3000/index.html`

## Структура проекта

```
fit-sait/
├── admin.html          # Админ-панель
├── index.html          # Публичный сайт
├── server.js           # Серверная часть
├── package.json        # Зависимости Node.js
├── config.json         # Конфигурация (не в Git)
├── data/
│   └── content.json    # База данных в JSON
├── css/
│   ├── style.css       # Стили сайта
│   └── admin.css       # Стили админ-панели
├── js/
│   ├── script.js       # JavaScript сайта
│   └── admin.js        # JavaScript админ-панели
└── images/             # Изображения
```

## API Endpoints

### Публичные
- `GET /api/content` - Получить все данные

### Авторизация
- `POST /api/login` - Вход в систему
- `POST /api/logout` - Выход из системы
- `GET /api/check-auth` - Проверка авторизации

### Новости (требует авторизации)
- `GET /api/admin/news` - Список новостей
- `POST /api/admin/news` - Создать новость
- `PUT /api/admin/news/:id` - Обновить новость
- `DELETE /api/admin/news/:id` - Удалить новость

### Партнеры (требует авторизации)
- `GET /api/admin/partners` - Список партнеров
- `POST /api/admin/partners` - Создать партнера
- `PUT /api/admin/partners/:id` - Обновить партнера
- `DELETE /api/admin/partners/:id` - Удалить партнера

## Безопасность

- Пароли хранятся в виде bcrypt хэшей
- Все админ-маршруты защищены middleware авторизации
- Сессии с защищенными cookies
- Экранирование HTML для предотвращения XSS

## Загрузка изображений

Система не обрабатывает загрузку файлов. Изображения загружаются вручную на сервер (например, по FTP), а в админ-панели указывается только URL изображения.

Рекомендуемая структура:
- Новости: `/images/news/`
- Партнеры: `/images/partners/`

## Развертывание

1. Загрузите файлы на сервер
2. Установите Node.js и npm
3. Выполните `npm install`
4. Настройте `config.json` с новым паролем
5. Запустите `npm start`
6. Настройте веб-сервер (nginx/Apache) для проксирования на порт Node.js

## Новые возможности (v2.0)

### Сортировка контента
- Управление порядком отображения новостей и партнеров
- Поле "Порядок отображения" в админ-панели
- Автоматическая сортировка при загрузке

### Улучшенная совместимость
- Поддержка старых браузеров (IE11+)
- Улучшенная работа на мобильных устройствах
- Touch-поддержка и жесты
- Accessibility (WCAG 2.1)
- Поддержка темной темы и высокого контраста

### Производительность
- Lazy loading изображений
- Оптимизированные CSS и JavaScript
- Улучшенная загрузка на медленных соединениях

Подробнее см. [SORTING_GUIDE.md](SORTING_GUIDE.md)

## Поддержка

При возникновении проблем проверьте:
- Запущен ли Node.js сервер
- Доступен ли файл `data/content.json` для записи
- Корректность настроек в `config.json`
- Поддерживается ли ваш браузер (см. SORTING_GUIDE.md)