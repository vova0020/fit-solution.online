Конечно. Вот полное, структурированное Техническое Задание (ТЗ), основанное на всех наших обсуждениях. Оно полностью кастомное, рассчитано на Node.js и не использует внешние БД, что идеально для вашего слабого сервера.Техническое Задание (ТЗ)На разработку системы управления контентом (Микро-CMS) для сайта [Название Вашего Сайта]Дата: 30.10.2025Версия: 1.01. Введение и Цели1.1. Проблема:Текущий сайт является статическим (HTML/CSS/JS). Весь контент (новости, текстовые блоки) "зашит" в код. Для любого обновления (добавление новости, исправление опечатки) требуется ручное редактирование HTML/JS файлов и их загрузка на сервер, что неэффективно и требует технических навыков.1.2. Цель:Разработать легковесную, кастомную серверную часть (Бэкенд) и защищенный интерфейс (Админ-панель) для управления динамическим контентом сайта.1.3. Задачи:Создать Бэкенд на Node.js + Express.js.Реализовать Flat-File систему хранения данных (без БД) с использованием JSON-файла.Создать защищенную Админ-панель с аутентификацией (логин/пароль) на основе сессий.Реализовать полный CRUD (Create, Read, Update, Delete) функционал для сущности "Новость".Модифицировать существующий публичный сайт для загрузки и отображения контента из Бэкенда.2. Ключевые Требования и ОграниченияТехнологический стек (Бэкенд): Node.js, Express.js.Хранилище данных: Категорический отказ от СУБД (MySQL, PostgreSQL, MongoDB и т.д.). Все данные должны храниться в одном JSON-файле на сервере (например, data/content.json).Серверные ресурсы: Решение должно быть крайне экономичным к ресурсам (CPU/RAM), так как будет развернуто на слабом VDS/Хостинге.Управление файлами: Система не должна обрабатывать загрузку (upload) файлов. Картинки для новостей загружаются администратором на сервер вручную (например, по FTP/SFTP), а в Админ-панели указывается только URL этой картинки.Кастомизация: Решение должно быть полностью самописным, без использования сторонних CMS-сервисов (Headless или традиционных).3. Архитектура СистемыСистема состоит из 4-х компонентов:Публичный Фронтенд (Модифицируется): Ваш существующий index.html + main.js.Админ-Фронтенд (Создается): Новый, отдельный HTML/CSS/JS (admin.html, admin.js) для интерфейса управления.Бэкенд-API (Создается): server.js (Node.js/Express) — "мозг" системы, обрабатывающий запросы.Хранилище (Создается): content.json — единый файл-база данных.Логика работы:Публичный сайт: При загрузке index.html, main.js делает fetch-запрос к GET /api/content. Бэкенд читает content.json и отдает его. main.js "рисует" новости.Админ-панель: При заходе на admin.html, admin.js проверяет сессию. Если сессии нет — показывает форму логина. Форма отправляет POST /api/login. Бэкенд проверяет пароль, создает сессию и отправляет cookie. Все последующие запросы (создать/удалить новость) автоматически используют этот cookie для авторизации.4. Спецификация Хранилища (content.json)Файл data/content.json должен иметь следующую структуру:JSON{
  "news": [
    {
      "id": "1678886400",
      "createdAt": "2025-03-15T12:00:00Z",
      "title": "Наша первая новость",
      "text": "Полный текст новости. \nМожно использовать переносы строк.",
      "imageUrl": "/images/news/pic1.jpg"
    }
  ]
}
id: Уникальный идентификатор (рекомендуется использовать Date.now() или uuid).createdAt: Дата создания в формате ISO.title, text, imageUrl: Контент, управляемый из админки.5. Функциональные Требования5.1. Публичный Сайт (index.html, main.js)Удаление статики: Весь статический HTML-код новостей должен быть удален из index.html.Динамическая загрузка: main.js при загрузке страницы должен выполнять async fetch запрос к публичному API (GET /api/content).Рендеринг: JS должен в цикле обойти полученный массив news и сгенерировать HTML-разметку для каждой новости, вставив ее в соответствующий контейнер (например, <div id="news-container">).Обработка ошибок: В случае ошибки загрузки (например, 500) или отсутствия новостей, должно отображаться сообщение ("Не удалось загрузить новости" или "Новостей пока нет").5.2. Аутентификация (Админ-панель + Бэкенд)Страница входа: admin.html при отсутствии сессии должен показывать только форму (поля "Логин", "Пароль", кнопка "Войти").Конфигурация (Бэкенд): Должен быть создан файл config.json (исключен из Git), хранящий:adminUser: (например, "admin")adminPassHash: Хэш пароля, сгенерированный bcrypt. Пароль не хранится в открытом виде.sessionSecret: Длинная случайная строка для подписи сессий.Логика входа (Бэкенд): Маршрут POST /api/login должен:Принимать username и password.Сравнивать username с config.json.Сравнивать password с хэшем в config.json с помощью bcrypt.compare().При успехе: создавать сессию (req.session.isLoggedIn = true) и отправлять cookie.При неудаче: возвращать ошибку 401.Проверка сессии (Бэкенд):Маршрут GET /api/check-auth должен проверять req.session.isLoggedIn и возвращать { authenticated: true/false }. admin.js использует его при загрузке.Должен быть создан Middleware (промежуточное ПО) checkAuth, который будет защищать все admin маршруты. Он должен проверять req.session.isLoggedIn и возвращать 401, если сессии нет.Выход (Бэкенд + Фронтенд):Маршрут POST /api/logout должен уничтожать сессию (req.session.destroy()).В admin.html должна быть кнопка "Выйти", которая вызывает этот маршрут и перезагружает страницу (возвращая на форму логина).5.3. Управление Новостями (Админ-панель + Бэкенд)Интерфейс (admin.html): Должен состоять из двух блоков:Форма "Добавить / Редактировать новость".Список "Существующие новости".Чтение (Read):При загрузке админки admin.js должен запрашивать GET /api/admin/news.Бэкенд читает content.json, парсит его и возвращает массив news.admin.js рендерит список новостей (Заголовок + [Ред.] + [Удал.]).Создание (Create):Форма должна содержать поля: "Заголовок" (<input type="text">), "Текст" (<textarea>), "URL Картинки" (<input type="text">).Кнопка "Добавить" отправляет POST /api/admin/news с данными.Бэкенд:a. Читает content.json.b. Добавляет новый объект в массив news (генерируя id и createdAt).c. Перезаписывает весь файл content.json обновленными данными.d. Возвращает новую новость.admin.js при успехе обновляет список новостей на странице.Обновление (Update):Кнопка [Ред.] напротив новости должна заполнять форму данными этой новости.Кнопка "Добавить" должна меняться на "Обновить"."Обновить" отправляет PUT /api/admin/news/:id с данными.Бэкенд:a. Читает content.json.b. Находит новость в массиве по :id.c. Обновляет ее поля.d. Перезаписывает весь файл content.json.e. Возвращает обновленную новость.Удаление (Delete):Кнопка [Удал.] должна вызывать window.confirm("Вы уверены, что хотите удалить новость?").При подтверждении, admin.js отправляет DELETE /api/admin/news/:id.Бэкенд:a. Читает content.json.b. Удаляет новость из массива по :id.c. Перезаписывает весь файл content.json.d. Возвращает { success: true }.6. Спецификация API (Endpoints)МетодURLЗащитаОписаниеПубличныеGET/api/contentНет(Для сайта) Отдает все содержимое content.json.АутентификацияPOST/api/loginНетПринимает {username, password}. Устанавливает сессию.POST/api/logoutНетУничтожает сессию.GET/api/check-authНетПроверяет, жива ли сессия. Возвращает { authenticated: bool }.Админ-панельGET/api/admin/newsДа(Для админки) Отдает только список новостей из content.json.POST/api/admin/newsДаПринимает {title, text, imageUrl}. Создает новость.PUT/api/admin/news/:idДаПринимает {title, text, imageUrl}. Обновляет новость по ID.DELETE/api/admin/news/:idДаУдаляет новость по ID.7. Нефункциональные ТребованияБезопасность:Все административные маршруты (/api/admin/*) должны быть защищены Middleware checkAuth.Пароль администратора должен храниться только в виде хэша bcrypt.Файл config.json (с хэшем и секретом сессии) не должен попадать в Git-репозиторий (добавить в .gitignore).Файл content.json должен быть защищен от прямой веб-загрузки (если это возможно настройками сервера).Производительность:Все операции чтения/записи файла content.json должны быть синхронными (fs.readFileSync, fs.writeFileSync) или использовать async/await с fs.promises, чтобы избежать "гонки состояний" (конфликтов при одновременном доступе).Usability (Админка):Интерфейс должен быть интуитивно понятным.Должна быть обратная связь (например, "Новость сохранена", "Ошибка!").Поле "Текст" должно быть <textarea> для удобного многострочного ввода.